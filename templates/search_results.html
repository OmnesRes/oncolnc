<!DOCTYPE html>

<html lang="en-US">


<head>
    <title>Cox Results</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <style>
  body {font-family: "Arial", sans-serif;
  }
  .table th{
    text-align:center;
    font-size:20px;
  }
  .table td{
    text-align:center;
    font-size:16px;
  }

  .message{
    color:red;
    font-size:20px;
  }

  .tooltip.top .tooltip-arrow{
  border-top-color: #337AB7;
  border-top-width: 6px;
  }
  .tooltip-inner{
      font-size:20px;
      color:black;
      background-color: white;
      border: 3px solid #337AB7;
      white-space:pre;
      max-width:none;
      text-align:left;
  }




  </style>
</head>
<body>
  <div class="col-sm-12 text-center">
    <span style="font-size: 40px">Cox regression results for {{ raw }}</span>
  </div>
  {% if name_conflict %}
  <div class="col-sm-12 text-center message">
    This gene name has a known potential conflict.  If you mean Entrez ID {{name_conflict.0}}, you're good, that data is shown.  But if you mean Entrez ID {{name_conflict.1}}, please go back and submit that id.
  </div>
  {% endif %}
  {% if mi_conflict %}
  <div class="col-sm-12 text-center message">
    This name is in TCGA Tier 3 mRNA files as well as MiTranscriptome beta.  If you want the TCGA Tier 3 data, you're good.
    If you want the MiTranscriptome beta data, please go back and input {{mi_conflict}}.
  </div>
  {% endif %}
  <div class='container'>
    <table class="table table-condensed">
      <thead>
        <tr>
          <th><br>Cancer <sup data-toggle="tooltip" data-placement="right"
                title=
"BLCA: Bladder Urothelial Carcinoma
BRCA: Breast invasive carcinoma
CESC: Cervical squamous cell carcinoma and endocervical adenocarcinoma
COAD: Colon adenocarcinoma
ESCA: Esophageal carcinoma
GBM: Glioblastoma multiforme
HNSC: Head and Neck squamous cell carcinoma
KIRC: Kidney renal clear cell carcinoma
KIRP: Kidney renal papillary cell carcinoma
LAML: Acute Myeloid Leukemia
LGG: Brain Lower Grade Glioma
LIHC: Liver hepatocellular carcinoma
LUAD: Lung adenocarcinoma
LUSC: Lung squamous cell carcinoma
OV: Ovarian serous cystadenocarcinoma
PAAD: Pancreatic adenocarcinoma
READ: Rectum adenocarcinoma
SARC: Sarcoma
SKCM: Skin Cutaneous Melanoma
STAD: Stomach adenocarcinoma
UCEC: Uterine Corpus Endometrial Carcinoma
"><i class="fa fa-info-circle fa-lg" style="color:#337AB7"></i></sup></th>
          <th>Cox<br>Coefficient</th>
          <th>P-Value</th>
          <th>FDR<br>Corrected</th>
          <th>Rank
          <sup data-toggle="tooltip" data-placement="bottom" title=
          "P-value rank for that gene in that cancer. mRNAs, miRNAs, and lncRNAs are ranked separately."><i class="fa fa-info-circle fa-lg" style="color:#337AB7"></i></sup></th>
          <th>Median<br>Expression
          {% if species == 'mRNA' %}
          <sup data-toggle="tooltip" data-placement="bottom" title=
          "Read counts are RSEM RNAseqv2 normalized results for all cancers"><i class="fa fa-info-circle fa-lg" style="color:#337AB7"></i></sup></th>
          {% elif species == "miRNA" %}
          <sup data-toggle="tooltip" data-placement="bottom" title=
          "Read counts are reads per million miRNA mapped, except for GBM, which are normalized microarray values"><i class="fa fa-info-circle fa-lg" style="color:#337AB7"></i></sup></th>
          {% else %}
          <sup data-toggle="tooltip" data-placement="bottom" title=
          "Read counts are MiTranscriptome beta normalized counts"
          ><i class="fa fa-info-circle fa-lg" style="color:#337AB7"></i></sup></th>
          {% endif %}
          <th>Mean<br>Expression</th>
          <th>Plot Kaplan?</th>
        </tr>
      </thead>
      <tbody>
        {% if cancer %}
        <tr>
          <td>{{cancer}}</td>
          <td>{{results.0.Cox}}</td>
          <td>{{ results.0.p_value }}</td>
          <td>{{ results.0.fdr }}</td>
          <td>{{ results.0.rank }}</td>
          <td>{{ results.0.median }}</td>
          <td>{{ results.0.mean }}</td>
          <td>
            <form action='/kaplan' method='get' target='_blank'>
              <input type="hidden" name="cancer" value={{ cancer }}>
              <input type="hidden" name="gene_id" value={{ results.0.gene_id }}>
              <input type="hidden" name="raw" value={{ raw }}>
              <input type="hidden" name="species" value={{ species }}>
              <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
            </form>
          </td>
        </tr>
        {% else %}
          {% if species != 'mRNA' %}
            {% for result in results|dictsort:"cancer" %}
            <tr>
              <td>{{result.cancer}}</td>
              <td>{{result.Cox}}</td>
              <td>{{ result.p_value }}</td>
              <td>{{ result.fdr }}</td>
              <td>{{ result.rank }}</td>
              <td>{{ result.median }}</td>
              <td>{{ result.mean }}</td>
              <td>
                <form action='/kaplan' method='get' target='_blank'>
                  <input type="hidden" name="cancer" value={{ result.cancer }}>
                  <input type="hidden" name="gene_id" value={{ result.gene_id }}>
                  <input type="hidden" name="raw" value={{ raw }}>
                  <input type="hidden" name="species" value={{ species }}>
                  <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          {% else %}
            {% for result in results %}
            {% if result %}
              <tr>
                <td>{{result.cancer}}</td>
                <td>{{result.cox}}</td>
                <td>{{ result.p_value }}</td>
                <td>{{ result.fdr }}</td>
                <td>{{ result.rank }}</td>
                <td>{{ result.median }}</td>
                <td>{{ result.mean }}</td>
                <td>
                  <form action='/kaplan' method='get' target='_blank'>
                    <input type="hidden" name="cancer" value={{ result.cancer }}>
                    <input type="hidden" name="gene_id" value={{ gene_id }}>
                    <input type="hidden" name="raw" value={{ raw }}>
                    <input type="hidden" name="species" value={{ species }}>
                    <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
                  </form>
                </td>
              </tr>
            {% endif %}
            {% endfor %}
        {% endif %}
        {% endif %}
      </tbody>
    </table>
  </table>
  {% if missing %}
  <div class="col-sm-12 text-center message">
    Missing cancers?  Some genes don't meet the expression cutoff for the analysis, or there was no expression data for that cancer for that gene.
  </div>
  {% endif %}
<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>
</body>
</html>