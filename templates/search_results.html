<!DOCTYPE html>

<html lang="en-US">


<head>
    <title>Cox Results</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <style>
  body {font-family: "Arial", sans-serif;
  }
  .table th{
    text-align:center;
    font-size:20px;
  }
  .table td{
    text-align:center;
    font-size:16px;
  }

  .message{
    color:red;
    font-size:20px;
  }
  </style>
</head>
<body>
  <div class="col-sm-12 text-center">
    <span style="font-size: 40px">Cox regression results for {{ raw }}</span>
  </div>
  {% if name_conflict %}
  <div class="col-sm-12 text-center message">
    This gene name has a known potential conflict.  If you mean Entrez ID {{name_conflict.0}}, you're good, that data is shown.  But if you mean Entrez ID {{name_conflict.1}}, please go back and submit that id.
  </div>
  {% endif %}
  {% if mi_conflict %}
  <div class="col-sm-12 text-center message">
    This name is in TCGA Tier 3 mRNA files as well as MiTranscriptome beta.  If you want the TCGA Tier 3 data, you're good.
    If you want the MiTranscriptome beta data, please go back and input {{mi_conflict}}.
  </div>
  {% endif %}
  <div class='container'>
    <table class="table table-condensed">
      <thead>
        <tr>
          <th><br>Cancer</th>
          <th>Cox<br>Coefficient</th>
          <th>P-Value</th>
          <th>FDR<br>Corrected</th>
          <th>Rank</th>
          <th>Median<br>Expression</th>
          <th>Mean<br>Expression</th>
          <th>Plot Kaplan?</th>
        </tr>
      </thead>
      <tbody>
        {% if cancer %}
        <tr>
          <td>{{cancer}}</td>
          <td>{{results.0.Cox}}</td>
          <td>{{ results.0.p_value }}</td>
          <td>{{ results.0.fdr }}</td>
          <td>{{ results.0.rank }}</td>
          <td>{{ results.0.median }}</td>
          <td>{{ results.0.mean }}</td>
          <td>
            <form action='/kaplan' method='get' target='_blank'>
              <input type="hidden" name="cancer" value={{ cancer }}>
              <input type="hidden" name="gene_id" value={{ results.0.gene_id }}>
              <input type="hidden" name="raw" value={{ raw }}>
              <input type="hidden" name="species" value={{ species }}>
              <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
            </form>
          </td>
        </tr>
        {% else %}
          {% if species != 'mRNA' %}
            {% for result in results|dictsort:"cancer" %}
            <tr>
              <td>{{result.cancer}}</td>
              <td>{{result.Cox}}</td>
              <td>{{ result.p_value }}</td>
              <td>{{ result.fdr }}</td>
              <td>{{ result.rank }}</td>
              <td>{{ result.median }}</td>
              <td>{{ result.mean }}</td>
              <td>
                <form action='/kaplan' method='get' target='_blank'>
                  <input type="hidden" name="cancer" value={{ result.cancer }}>
                  <input type="hidden" name="gene_id" value={{ result.gene_id }}>
                  <input type="hidden" name="raw" value={{ raw }}>
                  <input type="hidden" name="species" value={{ species }}>
                  <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          {% else %}
            {% for result in results %}
            <tr>
              <td>{{result.cancer}}</td>
              <td>{{result.cox}}</td>
              <td>{{ result.p_value }}</td>
              <td>{{ result.fdr }}</td>
              <td>{{ result.rank }}</td>
              <td>{{ result.median }}</td>
              <td>{{ result.mean }}</td>
              <td>
                <form action='/kaplan' method='get' target='_blank'>
                  <input type="hidden" name="cancer" value={{ result.cancer }}>
                  <input type="hidden" name="gene_id" value={{ result.gene_id }}>
                  <input type="hidden" name="raw" value={{ raw }}>
                  <input type="hidden" name="species" value={{ species }}>
                  <button type="submit" class="btn-xsm btn-primary">Yes Please!</button>
                </form>
              </td>
            </tr>
            {% endfor %}
        {% endif %}
        {% endif %}
      </tbody>
    </table>
  </table>
  {% if missing %}
  <div class="col-sm-12 text-center message">
    Missing cancers?  Some genes don't meet the expression cutoff for the analysis, or are absent from the expression file for that cancer.
  </div>
  {% endif %}
</body>
</html>